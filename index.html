<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Czwalga</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        header { text-align: center; color: white; margin-bottom: 40px; }
        header h1 { font-size: 3em; margin-bottom: 10px; }
        header p { font-size: 1.2em; opacity: 0.9; }
        .card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }
        .login-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 10px;
            cursor: pointer;
        }
        .hidden { display: none; }
        #user-info { color: #333; }
        #user-info h2 { margin-bottom: 10px; }
        .balance { font-size: 1.5em; color: #667eea; font-weight: bold; }
        footer { text-align: center; color: white; padding: 20px; opacity: 0.8; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ’° Czwalga</h1>
            <p>Sklep z walutÄ… wirtualnÄ…</p>
        </header>

        <div id="login-section" class="card">
            <h2>ğŸ‘‹ Zaloguj siÄ™!</h2>
            <p style="margin: 20px 0; color: #666;">
                Aby zobczyÄ‡ swÃ³j balans, zaloguj siÄ™ na Discordzie i uÅ¼yj komend: !praca !balans !ranking
            </p>
            <button class="login-btn" onclick="alert('Zaloguj siÄ™ na Discordzie: !login')">
                ğŸ” Instrukcja Logowania
            </button>
        </div>

        <div id="user-section" class="card hidden">
            <div id="user-info">
                <h2 id="username">Åadowanie...</h2>
                <p>TwÃ³j balans:</p>
                <div class="balance" id="user-balance">0 ğŸ’°</div>
                <button class="login-btn" onclick="location.reload()" style="margin-top: 20px;">
                    ğŸ”„ OdÅ›wieÅ¼
                </button>
            </div>
        </div>

        <footer>
            <p>Czwalga Â© 2025 ğŸš€</p>
        </footer>
    </div>

    <script>
        const API_URL = "http://localhost:22425";
        const urlParams = new URLSearchParams(window.location.search);
        const userId = urlParams.get("user_id");

        async function loadUser() {
            if (!userId) return;

            try {
                const response = await fetch(`${API_URL}/api/balance/${userId}`);
                const data = await response.json();

                if (data.balance !== undefined) {
                    document.getElementById("login-section").classList.add("hidden");
                    document.getElementById("user-section").classList.remove("hidden");
                    document.getElementById("user-balance").textContent = `${data.balance} ğŸ’°`;
                    document.getElementById("username").textContent = `UÅ¼ytkownik #${userId}`;
                }
            } catch (error) {
                console.log("API niedostÄ™pne (normalne na dev):", error);
            }
        }

        loadUser();
    </script>
</body>
</html>
